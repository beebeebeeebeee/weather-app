<!DOCTYPE html>
<html lang="en">

<head>
    <title>First app</title>
    <link href="https://fonts.googleapis.com/css2?family=Gayathri&display=swap" rel="stylesheet">
</head>

<body onload="getLocation()" style="font-family: 'Gayathri', sans-serif;">
    <div style="width: 100%; height: max-content; font-size: 15px;background-color: azure;">
        Weather app @Electron.js -by: Bee Mak<br>
    </div>

    <div id="container">
        <div id="weather_basic" style="width: 45%; float: left; font-size: 70px;">
            Loading...
        </div>
        <div id="weather_detail" style="width: 55%; float: right; text-align: right; font-size: 30px;"></div>
    </div>

    <script>
        var options = {
            enableHighAccuracy: true,
            timeout: 10000,
            maximumAge: 600000
        };

        function success(pos) {
            var crd = pos.coords;
            basic_html = document.getElementById('weather_basic')
            detail_html = document.getElementById('weather_detail')

            let api = '***REMOVED***';
            var weathers = null;
            fetch(
                    `https://api.openweathermap.org/data/2.5/weather?lat=${crd.latitude}&lon=${crd.longitude}&appid=${api}&units=metric`
                )
                .then(function (res) {
                    return res.json();
                })
                .then(function (data) {
                    console.log(data);
                    basic_html.innerHTML = `${data.name}<br>
                    `;
                    detail_html.innerHTML = `temp: ${data.main.temp}<br>
                    ${data.weather[0].description}
                    `;
                });


        }


        function error(err) {
            console.warn(`ERROR(${err.code}): ${err.message}`);
        }

        function getLocation() {
            navigator.geolocation.getCurrentPosition(success, error, options);
        }
    </script>
</body>

</html>